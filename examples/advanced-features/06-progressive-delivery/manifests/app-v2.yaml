apiVersion: apps/v1
kind: Deployment
metadata: {name: app-v2, namespace: canary-demo}
spec:
  replicas: 1
  selector: {matchLabels: {app: myapp, version: v2}}
  template:
    metadata: {labels: {app: myapp, version: v2}}
    spec:
      containers:
      - {name: app, image: hashicorp/http-echo:latest, args: ["-text=v2 (Canary 10%)", "-listen=:8080"], ports: [{containerPort: 8080}]}
