# MediaWiki Stack with Traefik Ingress
# k3s 환경에서 프로덕션급 Wiki 시스템 구축

namespace: wiki-stack

apps:
  # 1. MySQL Database - MediaWiki 백엔드
  mysql:
    type: helm
    chart: bitnami/mysql
    version: "9.12.5"
    values:
      - mysql-values.yaml

  # 2. MediaWiki Application
  mediawiki:
    type: helm
    chart: bitnami/mediawiki
    version: "18.4.8"
    values:
      - mediawiki-values.yaml
    depends_on:
      - mysql

  # 3. Traefik Ingress (YAML로 정의)
  wiki-ingress:
    type: yaml
    files:
      - manifests/ingress.yaml
    depends_on:
      - mediawiki
