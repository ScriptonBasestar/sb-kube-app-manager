# Staging environment overrides
namespace: myapp-staging

global_labels:
  environment: staging
  managed-by: sbkube
  project: myapp

global_annotations:
  cost-center: qa-team
  auto-scale: "true"

apps:
  redis:
    type: helm
    chart: bitnami/redis
    version: "18.0.0"
    values:
      - values/redis-base.yaml
      - values/redis-staging.yaml
    labels:
      app: redis
      tier: cache
    enabled: true

  postgresql:
    type: helm
    chart: bitnami/postgresql
    version: "13.0.0"
    values:
      - values/postgresql-base.yaml
      - values/postgresql-staging.yaml
    labels:
      app: postgresql
      tier: database
    enabled: true

  backend:
    type: helm
    chart: bitnami/nginx
    version: "15.0.0"
    values:
      - values/backend-base.yaml
      - values/backend-staging.yaml
    depends_on:
      - redis
      - postgresql
    labels:
      app: backend
      tier: application
    enabled: true
