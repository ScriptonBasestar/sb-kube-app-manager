# SBKube AI Context Routing Configuration

# Context routing rules for different query types
context_routing:
  # Product-level queries (highest priority)
  product_queries:
    primary:
      - "PRODUCT.md"
      - "docs/00-product/product-definition.md"
    secondary:
      - "docs/00-product/product-spec.md"
      - "docs/00-product/vision-roadmap.md"
      - "docs/00-product/target-users.md"
    fallback:
      - "CONTEXT_MAP.md"
      - "README.md"

  # Architecture queries
  architecture_queries:
    primary:
      - "docs/10-modules/sbkube/ARCHITECTURE.md"
      - "docs/02-features/architecture.md"
    secondary:
      - "PRODUCT.md"
      - "SPEC.md"
    fallback:
      - "docs/00-product/product-definition.md"

  # Feature and usage queries
  feature_queries:
    primary:
      - "docs/00-product/product-spec.md"
      - "docs/02-features/commands.md"
    secondary:
      - "docs/02-features/application-types.md"
      - "docs/03-configuration/config-schema.md"
    fallback:
      - "docs/01-getting-started/README.md"
      - "examples/"

  # Implementation and development queries
  implementation_queries:
    primary:
      - "AGENTS.md"
      - "docs/10-modules/sbkube/MODULE.md"
      - "docs/04-development/README.md"
    secondary:
      - "docs/10-modules/sbkube/docs/20-implementation/"
      - "sbkube/"
    fallback:
      - "tests/"

  # Debugging and troubleshooting queries
  debugging_queries:
    primary:
      - "docs/07-troubleshooting/README.md"
      - "docs/10-modules/sbkube/docs/40-maintenance/troubleshooting.md"
    secondary:
      - "sbkube/validators/"
      - "sbkube/commands/"
    fallback:
      - "docs/99-internal/"

# Semantic chunking configuration
semantic_chunks:
  max_size: 4000  # tokens per chunk
  overlap: 200    # token overlap between chunks
  priority_sections:
    - "## 핵심 개념"
    - "## What"
    - "## Value"
    - "## Architecture"
    - "## API"
    - "## 설정"
    - "## 사용법"
    - "## 예제"

# Cross-reference mappings
cross_references:
  # Product → Details
  "PRODUCT.md":
    - "docs/00-product/product-definition.md"
    - "docs/00-product/product-spec.md"
    - "AGENTS.md"

  # Product Definition → Features
  "docs/00-product/product-definition.md":
    - "docs/00-product/product-spec.md"
    - "docs/00-product/target-users.md"

  # Product Spec → Implementation
  "docs/00-product/product-spec.md":
    - "docs/02-features/commands.md"
    - "docs/02-features/application-types.md"
    - "docs/03-configuration/config-schema.md"

  # Architecture → Code
  "docs/10-modules/sbkube/ARCHITECTURE.md":
    - "sbkube/cli.py"
    - "sbkube/commands/"
    - "sbkube/models/"

  # Agents → Development
  "AGENTS.md":
    - "docs/04-development/README.md"
    - "docs/10-modules/sbkube/MODULE.md"

# Priority loading order (always load in this sequence)
priority_load_order:
  - "PRODUCT.md"               # Always load first
  - "CONTEXT_MAP.md"           # Navigation guide
  - "AGENTS.md"                # Development context
  - "docs/00-product/"         # Product details

# Token budget allocation (target: 200K total)
token_budget:
  cold_start: 10000            # Initial context
  warm_context: 50000          # Active work
  implementation: 100000       # Code development
  reserved: 40000              # For responses

# Cache strategy
cache_strategy:
  always_cache:
    - "PRODUCT.md"
    - "CONTEXT_MAP.md"
  cache_during_development:
    - "AGENTS.md"
    - "docs/04-development/README.md"
  cache_during_feature_work:
    - "docs/00-product/product-spec.md"
    - "docs/02-features/commands.md"

# Intent pattern routing
intent_patterns:
  - pattern: "제품|product|what is|개요|overview"
    route: "product_queries"

  - pattern: "아키텍처|architecture|구조|structure|설계|design"
    route: "architecture_queries"

  - pattern: "사용|usage|how to|방법|명령어|command"
    route: "feature_queries"

  - pattern: "구현|implementation|개발|development|코드|code"
    route: "implementation_queries"

  - pattern: "오류|error|문제|problem|해결|troubleshoot|debug"
    route: "debugging_queries"
