# SBKube v0.3.0 Configuration
# Complete workflow example demonstrating all features

namespace: complete-example

apps:
  # 1. Remote Helm chart
  redis:
    type: helm
    chart: bitnami/redis
    version: "18.0.0"
    values:
      - redis-values.yaml
    depends_on: []

  # 2. Git repository (for custom charts)
  custom-app-source:
    type: git
    repo: example-app
    path: charts/myapp
    # Note: After prepare, use as local chart below

  # 3. Local chart from git repo
  custom-app:
    type: helm
    chart: ./repos/example-app/charts/myapp
    values:
      - myapp-values.yaml
    depends_on:
      - custom-app-source  # Wait for git clone

  # 4. YAML manifests
  monitoring:
    type: yaml
    files:
      - manifests/monitoring.yaml
    namespace: complete-example

  # 5. Custom actions
  monitoring-setup:
    type: action
    actions:
      - type: apply
        path: manifests/monitoring.yaml
      - type: apply
        path: manifests/alerts.yaml

  # 6. Custom commands
  post-install-check:
    type: exec
    commands:
      - echo "Checking deployment status..."
      - kubectl get pods -n complete-example
      - echo "Deployment check completed!"
    depends_on:
      - redis
      - custom-app
      - monitoring
